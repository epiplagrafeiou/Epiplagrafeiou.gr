
{
  "entities": {
    "Supplier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier of products.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the supplier."
        },
        "url": {
          "type": "string",
          "description": "URL of the supplier's XML feed.",
          "format": "uri"
        },
        "markupRules": {
          "type": "array",
          "description": "Rules for applying markup based on price ranges.",
          "items": {
            "type": "object",
            "properties": {
              "from": { "type": "number" },
              "to": { "type": "number" },
              "markup": { "type": "number" }
            },
            "required": ["from", "to", "markup"]
          }
        },
        "conversionRate": {
            "type": "number"
        },
        "profitability": {
            "type": "number"
        }
      },
      "required": [
        "name",
        "url",
        "markupRules"
      ]
    },
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the eShop.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the product."
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly slug for the product."
        },
        "description": {
          "type": "string",
          "description": "A description of the product."
        },
        "price": {
          "type": "number",
          "description": "The price of the product."
        },
        "category": {
          "type": "string",
          "description": "The product's raw category from the supplier (e.g., Tables)."
        },
        "imageId": {
            "type": "string",
            "description": "ID of the primary placeholder image."
        },
        "images": {
            "type": "array",
            "description": "Array of image URLs for the product gallery.",
            "items": {
                "type": "string",
                "format": "uri"
            }
        },
        "stock": {
            "type": "number",
            "description": "Available stock quantity."
        },
        "supplierId": {
          "type": "string",
          "description": "Reference to the supplier for this product."
        }
      },
      "required": [
        "name",
        "slug",
        "description",
        "price",
        "category",
        "imageId",
        "images",
        "stock",
        "supplierId"
      ]
    },
     "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a curated store category.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The display name of the category."
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly slug for the category."
        },
        "parentId": {
          "type": ["string", "null"],
          "description": "The ID of the parent category, or null for a top-level category."
        },
        "path": {
          "type": "string",
          "description": "The full slug path of the category (e.g., 'furniture/desks')."
        },
        "rawCategories": {
          "type": "array",
          "description": "A list of raw category strings from suppliers that are mapped to this curated category.",
          "items": {
            "type": "string"
          }
        },
        "order": {
          "type": "number",
          "description": "The display order of the category within its level."
        }
      },
      "required": ["name", "slug", "path", "rawCategories", "order"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/suppliers/{supplierId}",
        "definition": {
          "entityName": "Supplier",
          "schema": {
            "$ref": "#/entities/Supplier"
          },
          "description": "Stores supplier information."
        }
      },
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/entities/Product"
          },
          "description": "Stores all product information."
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/entities/Category"
          },
          "description": "Stores the curated category structure for the eShop."
        }
      }
    ]
  }
}
